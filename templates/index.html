<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chess Puzzle Game</title>
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/chessboard2.min.css', v=version) }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css', v=version) }}">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="{{ url_for('static', filename='js/chessboard2.min.js', v=version) }}"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/0.10.3/chess.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>‚ôî Chess Puzzle Challenge ‚ôî</h1>
            <p class="subtitle">Test your chess skills with fun puzzles!</p>
        </header>

        <div class="game-stats">
            <div class="stat">
                <span class="stat-label">Consecutive Wins:</span>
                <span class="stat-value" id="consecutive-wins">0</span>
            </div>
            <div class="stat">
                <span class="stat-label">Total Solved:</span>
                <span class="stat-value" id="total-solved">0</span>
            </div>
        </div>

        <div class="leaderboard-section">
            <h3>üèÜ Leaderboard</h3>
            <div class="leaderboard-tabs">
                <button class="leaderboard-tab active" data-mode="easy">Easy Mode</button>
                <button class="leaderboard-tab" data-mode="hard">Hard Mode</button>
                <button class="leaderboard-tab" data-mode="hikaru">Hikaru Mode</button>
            </div>
            <div class="leaderboard-content">
                <div id="easy-leaderboard" class="leaderboard-list active">
                    <div class="leaderboard-placeholder">Loading...</div>
                </div>
                <div id="hard-leaderboard" class="leaderboard-list">
                    <div class="leaderboard-placeholder">Loading...</div>
                </div>
                <div id="hikaru-leaderboard" class="leaderboard-list">
                    <div class="leaderboard-placeholder">Loading...</div>
                </div>
            </div>
        </div>

        <div class="game-area">
            <div class="puzzle-info">
                <h2 id="puzzle-description">Chess Board Ready</h2>
                <p id="moves-required">Click "New Puzzle" to start solving!</p>
            </div>

            <div class="game-layout">
                <div class="mode-selector">
                    <label class="mode-label">Difficulty:</label>
                    <button id="easy-mode-btn" class="btn btn-mode btn-mode-active" data-mode="easy">Easy</button>
                    <button id="hard-mode-btn" class="btn btn-mode" data-mode="hard">Hard</button>
                    <button id="hikaru-mode-btn" class="btn btn-mode" data-mode="hikaru">Hikaru</button>
                </div>
                
                <div class="chess-board-container">
                    <div class="coordinate-labels">
                        <div class="coordinate-left">
                            <span>8</span><span>7</span><span>6</span><span>5</span><span>4</span><span>3</span><span>2</span><span>1</span>
                        </div>
                        <div class="coordinate-bottom">
                            <span>A</span><span>B</span><span>C</span><span>D</span><span>E</span><span>F</span><span>G</span><span>H</span>
                        </div>
                        <div id="chessboard" class="chess-board"></div>
                    </div>
                </div>
            </div>

            <div class="controls">
                <button id="new-puzzle-btn" class="btn btn-primary">New Puzzle</button>
                <button id="reset-game-btn" class="btn btn-secondary">Reset Game</button>
                <button id="hint-btn" class="btn btn-hint">üí° Hint</button>
            </div>

            <div class="feedback" id="feedback">
                <div class="feedback-message" id="feedback-message"></div>
            </div>
        </div>

        <div class="instructions">
            <h3>How to Play:</h3>
            <ul>
                <li>Click "New Puzzle" to start a new challenge</li>
                <li>Make the best moves to solve the puzzle</li>
                <li>Use the "üí° Hint" button if you need help</li>
                <li><strong>Easy Mode:</strong> Puzzles rated 0-1500 with unlimited hints</li>
                <li><strong>Hard Mode:</strong> Puzzles rated 1500+ with max 3 hints (resets streak)</li>
                <li><strong>Hikaru Mode:</strong> Puzzles rated 1800+ with no hints allowed</li>
                <li>Solve puzzles to build your streak!</li>
            </ul>
        </div>
    </div>

    <!-- High Score Modal -->
    <div id="high-score-modal" class="high-score-modal">
        <div class="modal-content">
            <h3>üèÜ New High Score!</h3>
            <p>Congratulations! You made it to the leaderboard!</p>
            <input type="text" id="player-name-input" class="name-input" placeholder="Enter your name (optional)" maxlength="20">
            <div class="modal-buttons">
                <button id="save-score-btn" class="modal-btn modal-btn-primary">Save Score</button>
                <button id="cancel-score-btn" class="modal-btn modal-btn-secondary">Skip</button>
            </div>
        </div>
    </div>

    <!-- Solution Modal -->
    <div id="solution-modal" class="solution-modal">
        <div class="modal-content">
            <h3>üí° Solution</h3>
            <p id="solution-description"></p>
            <div class="solution-moves">
                <h4>Correct Moves:</h4>
                <div id="solution-moves-list"></div>
            </div>
            <div class="modal-buttons">
                <button id="new-puzzle-after-solution-btn" class="modal-btn modal-btn-primary">New Puzzle</button>
                <button id="close-solution-btn" class="modal-btn modal-btn-secondary">Close</button>
            </div>
        </div>
    </div>

    <footer class="footer">
        <div class="footer-content">
            <p>&copy; 2025 Chess Puzzle Challenge. Created by <a href="https://github.com/jakereiser" target="_blank" rel="noopener noreferrer">Jake Reiser</a></p>
        </div>
    </footer>

    <script src="{{ url_for('static', filename='script.js', v=version) }}"></script>
</body>
</html> 